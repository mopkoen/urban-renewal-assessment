# é¡å‹å®šç¾© - types.ts

## ğŸ“ æª”æ¡ˆä½ç½®

```
types.ts
```

## ğŸ¯ åŠŸèƒ½èªªæ˜

`types.ts` å®šç¾©äº†æ•´å€‹æ‡‰ç”¨ç¨‹å¼ä½¿ç”¨çš„ TypeScript é¡å‹ã€ä»‹é¢å’Œæšèˆ‰ï¼Œç¢ºä¿å‹åˆ¥å®‰å…¨èˆ‡ç¨‹å¼ç¢¼ä¸€è‡´æ€§ã€‚

## ğŸ“ ç¨‹å¼ç¢¼çµæ§‹

### å®Œæ•´ç¨‹å¼ç¢¼

```1:112:types.ts
export interface InputState {
  // Basic Info
  dihao: string;
  diduan: string;
  zoning: string;
  area: number;
  roadwidth: number;
  height: number;
  bcRatio: number; // Percentage
  far: number; // Percentage
  excavate: number; // Percentage
  floors: number;
  roofLayers: number;
  basement: number;

  // Regulations / Exemptions
  mech: number; // Percentage
  stair: number; // Percentage
  balcony: number; // Percentage
  roof: number; // Percentage

  // Costs
  common: number; // Percentage
  parkSize: number; // Ping
  buildCost: number; // Cost per Ping
  legalCost: number; // Cost per m2
  planFee: number;
  evalFee: number;
  boundaryFee: number;
  drillFee: number;
  neighborFee: number;

  // Sales & Rights
  parkPrice: number;
  price1F: number;
  price2F: number;
  oldPing: number;
  newUnits: number;
  owners: number;
  sellPercent: number; // Percentage
}

export interface CalculationResult {
  areas: {
    maxBuildArea: number;
    legalFAR: number;
    bonusFAR: number;
    mechArea: number;
    stairArea: number;
    balconyArea: number;
    roofArea: number;
    excavateArea: number;
    basementArea: number;
    totalPing: number;
    totalM2: number;
  };
  sales: {
    parkAreaPing: number;
    totalParks: number;
    firstFloorSale: number;
    upperFloorSale: number;
    remainUpper: number;
    totalSalePing: number;
    landEfficiency: number;
  };
  costs: {
    rebuildCost: number;
    designFee: number;
    loanInterest: number;
    fullMgmtFee: number;
    totalCost: number;
    commonBurdenPct: number;
    otherFees: number; // Aggregate for chart
    // Detailed breakdown for modal
    breakdown: {
      fund: number;
      licenseFee: number;
      reviewFee: number;
      bonusAppFee: number;
      pipeFee: number;
      cadastralFee: number;
      rightsFees: number;
      stampTax: number;
      trustFee: number;
    }
  };
  revenue: {
    parkRevenue: number;
    firstRevenue: number;
    upperRevenue: number;
    totalRevenue: number;
  };
  equity: {
    sellParks: number;
    sellUpperPing: number;
    cashBack: number;
    returnIndoor: number;
    pingExchange: number;
    returnRatio: number;
    loanYears: number;
  };
}

export enum TabCategory {
  BASIC = 'BASIC',
  REGULATIONS = 'REGULATIONS',
  COSTS = 'COSTS',
  SALES = 'SALES'
}

export type Language = 'zh-TW' | 'zh-CN' | 'en';
export type Theme = 'light' | 'dark';
```

## ğŸ” è©³ç´°èªªæ˜

### 1. InputState ä»‹é¢

å®šç¾©æ‰€æœ‰ä½¿ç”¨è€…è¼¸å…¥æ¬„ä½çš„çµæ§‹ã€‚

#### åŸºæœ¬è³‡è¨Šï¼ˆBasic Infoï¼‰

```2:14:types.ts
  // Basic Info
  dihao: string;
  diduan: string;
  zoning: string;
  area: number;
  roadwidth: number;
  height: number;
  bcRatio: number; // Percentage
  far: number; // Percentage
  excavate: number; // Percentage
  floors: number;
  roofLayers: number;
  basement: number;
```

- **`dihao`**ï¼šåœ°è™Ÿï¼ˆæ–‡å­—ï¼‰
- **`diduan`**ï¼šåœ°æ®µï¼ˆæ–‡å­—ï¼‰
- **`zoning`**ï¼šä½¿ç”¨åˆ†å€ï¼ˆæ–‡å­—ï¼‰
- **`area`**ï¼šåŸºåœ°é¢ç©ï¼ˆå¹³æ–¹å…¬å°ºï¼‰
- **`roadwidth`**ï¼šæœ€å¤§è·¯å¯¬ï¼ˆå…¬å°ºï¼‰
- **`height`**ï¼šé ä¼°æ¨“é«˜ï¼ˆå…¬å°ºï¼‰
- **`bcRatio`**ï¼šå»ºè”½ç‡ï¼ˆç™¾åˆ†æ¯”ï¼Œ0-100ï¼‰
- **`far`**ï¼šå®¹ç©ç‡ï¼ˆç™¾åˆ†æ¯”ï¼Œ0-100ï¼‰
- **`excavate`**ï¼šé–‹æŒ–ç‡ï¼ˆç™¾åˆ†æ¯”ï¼Œ0-100ï¼‰
- **`floors`**ï¼šé ä¼°åœ°ä¸Šå±¤æ•¸ï¼ˆæ•´æ•¸ï¼‰
- **`roofLayers`**ï¼šå±‹çªå±¤æ•¸ï¼ˆæ•´æ•¸ï¼‰
- **`basement`**ï¼šé ä¼°åœ°ä¸‹å±¤æ•¸ï¼ˆæ•´æ•¸ï¼‰

#### å®¹ç©è¦è²»ï¼ˆRegulations / Exemptionsï¼‰

```16:20:types.ts
  // Regulations / Exemptions
  mech: number; // Percentage
  stair: number; // Percentage
  balcony: number; // Percentage
  roof: number; // Percentage
```

- **`mech`**ï¼šæ©Ÿé›»ä¸Šé™ï¼ˆç™¾åˆ†æ¯”ï¼‰
- **`stair`**ï¼šæ¢¯å»³ä¸Šé™ï¼ˆç™¾åˆ†æ¯”ï¼‰
- **`balcony`**ï¼šé™½å°ä¸Šé™ï¼ˆç™¾åˆ†æ¯”ï¼‰
- **`roof`**ï¼šå–®å±¤å±‹çªä¸Šé™ï¼ˆç™¾åˆ†æ¯”ï¼‰

#### æˆæœ¬ï¼ˆCostsï¼‰

```22:31:types.ts
  // Costs
  common: number; // Percentage
  parkSize: number; // Ping
  buildCost: number; // Cost per Ping
  legalCost: number; // Cost per m2
  planFee: number;
  evalFee: number;
  boundaryFee: number;
  drillFee: number;
  neighborFee: number;
```

- **`common`**ï¼šé ä¼°å…¬è¨­æ¯”ï¼ˆç™¾åˆ†æ¯”ï¼‰
- **`parkSize`**ï¼šè»Šä½å–®ä½é¢ç©ï¼ˆåªï¼‰
- **`buildCost`**ï¼šç‡Ÿå»ºæˆæœ¬ï¼ˆå…ƒ/åªï¼‰
- **`legalCost`**ï¼šæ³•å®šå·¥ç¨‹é€ åƒ¹ï¼ˆå…ƒ/å¹³æ–¹å…¬å°ºï¼‰
- **`planFee`**ï¼šéƒ½æ›´è¦åŠƒè²»ï¼ˆå…ƒï¼‰
- **`evalFee`**ï¼šä¸å‹•ç”¢ä¼°åƒ¹è²»ï¼ˆå…ƒï¼‰
- **`boundaryFee`**ï¼šåœŸåœ°é‘‘ç•Œè²»ï¼ˆå…ƒï¼‰
- **`drillFee`**ï¼šé‘½æ¢è²»ï¼ˆå…ƒï¼‰
- **`neighborFee`**ï¼šé„°æˆ¿é‘‘å®šè²»ï¼ˆå…ƒï¼‰

#### éŠ·å”®èˆ‡æ¬Šç›Šï¼ˆSales & Rightsï¼‰

```33:40:types.ts
  // Sales & Rights
  parkPrice: number;
  price1F: number;
  price2F: number;
  oldPing: number;
  newUnits: number;
  owners: number;
  sellPercent: number; // Percentage
```

- **`parkPrice`**ï¼šé ä¼°è»Šä½å–®åƒ¹ï¼ˆå…ƒï¼‰
- **`price1F`**ï¼šä¸€æ¨“å–®åƒ¹ï¼ˆå…ƒ/åªï¼‰
- **`price2F`**ï¼šäºŒæ¨“ä»¥ä¸Šå–®åƒ¹ï¼ˆå…ƒ/åªï¼‰
- **`oldPing`**ï¼šæ›´æ–°å‰åŸå®¤å…§åªæ•¸ï¼ˆåªï¼‰
- **`newUnits`**ï¼šæ›´æ–°å¾Œç¸½æˆ¶æ•¸ï¼ˆæ•´æ•¸ï¼‰
- **`owners`**ï¼šåœ°ä¸»äººæ•¸ï¼ˆæ•´æ•¸ï¼‰
- **`sellPercent`**ï¼šéŠ·å”®é¢ç©ç™¾åˆ†æ¯”ï¼ˆ0-100ï¼‰

### 2. CalculationResult ä»‹é¢

å®šç¾©è¨ˆç®—çµæœçš„å®Œæ•´çµæ§‹ã€‚

#### é¢ç©ï¼ˆareasï¼‰

```44:56:types.ts
  areas: {
    maxBuildArea: number;
    legalFAR: number;
    bonusFAR: number;
    mechArea: number;
    stairArea: number;
    balconyArea: number;
    roofArea: number;
    excavateArea: number;
    basementArea: number;
    totalPing: number;
    totalM2: number;
  };
```

- **`maxBuildArea`**ï¼šæœ€å¤§å»ºç¯‰é¢ç©ï¼ˆå¹³æ–¹å…¬å°ºï¼‰
- **`legalFAR`**ï¼šæ³•å®šå®¹ç©é¢ç©ï¼ˆå¹³æ–¹å…¬å°ºï¼‰
- **`bonusFAR`**ï¼šçå‹µå®¹ç©é¢ç©ï¼ˆå¹³æ–¹å…¬å°ºï¼‰
- **`mechArea`**ï¼šæ©Ÿé›»é¢ç©ï¼ˆå¹³æ–¹å…¬å°ºï¼‰
- **`stairArea`**ï¼šæ¢¯å»³é¢ç©ï¼ˆå¹³æ–¹å…¬å°ºï¼‰
- **`balconyArea`**ï¼šé™½å°é¢ç©ï¼ˆå¹³æ–¹å…¬å°ºï¼‰
- **`roofArea`**ï¼šå±‹çªé¢ç©ï¼ˆå¹³æ–¹å…¬å°ºï¼‰
- **`excavateArea`**ï¼šé–‹æŒ–é¢ç©ï¼ˆå¹³æ–¹å…¬å°ºï¼‰
- **`basementArea`**ï¼šåœ°ä¸‹å®¤é¢ç©ï¼ˆå¹³æ–¹å…¬å°ºï¼‰
- **`totalPing`**ï¼šç¸½æ¨“åœ°æ¿é¢ç©ï¼ˆåªï¼‰
- **`totalM2`**ï¼šç¸½æ¨“åœ°æ¿é¢ç©ï¼ˆå¹³æ–¹å…¬å°ºï¼‰

#### éŠ·å”®ï¼ˆsalesï¼‰

```57:64:types.ts
  sales: {
    parkAreaPing: number;
    totalParks: number;
    firstFloorSale: number;
    upperFloorSale: number;
    remainUpper: number;
    totalSalePing: number;
    landEfficiency: number;
  };
```

- **`parkAreaPing`**ï¼šè»Šä½ç¸½é¢ç©ï¼ˆåªï¼‰
- **`totalParks`**ï¼šè»Šä½æ•¸é‡ï¼ˆå€‹ï¼‰
- **`firstFloorSale`**ï¼šä¸€æ¨“éŠ·å”®é¢ç©ï¼ˆåªï¼‰
- **`upperFloorSale`**ï¼šäºŒæ¨“ä»¥ä¸ŠéŠ·å”®é¢ç©ï¼ˆåªï¼‰
- **`remainUpper`**ï¼šä¿ç•™çš„äºŒæ¨“ä»¥ä¸Šé¢ç©ï¼ˆåªï¼‰
- **`totalSalePing`**ï¼šç¸½éŠ·å”®é¢ç©ï¼ˆåªï¼‰
- **`landEfficiency`**ï¼šåœŸåœ°åªæ•ˆï¼ˆæ¯”ç‡ï¼‰

#### æˆæœ¬ï¼ˆcostsï¼‰

```65:86:types.ts
  costs: {
    rebuildCost: number;
    designFee: number;
    loanInterest: number;
    fullMgmtFee: number;
    totalCost: number;
    commonBurdenPct: number;
    otherFees: number; // Aggregate for chart
    // Detailed breakdown for modal
    breakdown: {
      fund: number;
      licenseFee: number;
      reviewFee: number;
      bonusAppFee: number;
      pipeFee: number;
      cadastralFee: number;
      rightsFees: number;
      stampTax: number;
      trustFee: number;
    }
  };
```

- **`rebuildCost`**ï¼šé‡å»ºè²»ç”¨ï¼ˆå…ƒï¼‰
- **`designFee`**ï¼šè¨­è¨ˆè²»ç”¨ï¼ˆå…ƒï¼‰
- **`loanInterest`**ï¼šèè³‡åˆ©æ¯ï¼ˆå…ƒï¼‰
- **`fullMgmtFee`**ï¼šå…¨æ¡ˆç®¡ç†è²»ï¼ˆå…ƒï¼‰
- **`totalCost`**ï¼šé ä¼°ç¸½æˆæœ¬ï¼ˆå…ƒï¼‰
- **`commonBurdenPct`**ï¼šå…±åŒè² æ“”æ¯”ï¼ˆç™¾åˆ†æ¯”ï¼‰
- **`otherFees`**ï¼šå…¶ä»–è¦è²»ç¸½è¨ˆï¼ˆå…ƒï¼‰
- **`breakdown`**ï¼šè²»ç”¨æ˜ç´°ï¼ˆç”¨æ–¼å½ˆçª—é¡¯ç¤ºï¼‰

#### æ”¶ç›Šï¼ˆrevenueï¼‰

```87:92:types.ts
  revenue: {
    parkRevenue: number;
    firstRevenue: number;
    upperRevenue: number;
    totalRevenue: number;
  };
```

- **`parkRevenue`**ï¼šè»Šä½æ”¶å…¥ï¼ˆå…ƒï¼‰
- **`firstRevenue`**ï¼šä¸€æ¨“æ”¶å…¥ï¼ˆå…ƒï¼‰
- **`upperRevenue`**ï¼šäºŒæ¨“ä»¥ä¸Šæ”¶å…¥ï¼ˆå…ƒï¼‰
- **`totalRevenue`**ï¼šé ä¼°ç¸½æ”¶å…¥ï¼ˆå…ƒï¼‰

#### æ¬Šç›Šï¼ˆequityï¼‰

```93:101:types.ts
  equity: {
    sellParks: number;
    sellUpperPing: number;
    cashBack: number;
    returnIndoor: number;
    pingExchange: number;
    returnRatio: number;
    loanYears: number;
  };
```

- **`sellParks`**ï¼šéŠ·å”®è»Šä½æ•¸é‡ï¼ˆå€‹ï¼‰
- **`sellUpperPing`**ï¼šéŠ·å”®äºŒæ¨“ä»¥ä¸Šé¢ç©ï¼ˆåªï¼‰
- **`cashBack`**ï¼šè®Šç¾ç¸½é‡‘é¡ï¼ˆå…ƒï¼‰
- **`returnIndoor`**ï¼šåˆ†å›å®¤å…§åªæ•¸ï¼ˆåªï¼‰
- **`pingExchange`**ï¼šä¸€åªæ›å¹¾åªï¼ˆæ¯”ç‡ï¼Œé—œéµæŒ‡æ¨™ï¼‰
- **`returnRatio`**ï¼šåˆ†å›æ¯”ä¾‹ï¼ˆæ¯”ç‡ï¼‰
- **`loanYears`**ï¼šé ä¼°è²¸æ¬¾æœŸï¼ˆå¹´ï¼‰

### 3. TabCategory æšèˆ‰

```104:109:types.ts
export enum TabCategory {
  BASIC = 'BASIC',
  REGULATIONS = 'REGULATIONS',
  COSTS = 'COSTS',
  SALES = 'SALES'
}
```

å®šç¾©å››å€‹ä¸»è¦åˆ†é ï¼š
- **`BASIC`**ï¼šåŸºæœ¬åƒæ•¸
- **`REGULATIONS`**ï¼šå®¹ç©è¦è²»
- **`COSTS`**ï¼šæˆæœ¬ä¼°ç®—
- **`SALES`**ï¼šéŠ·å”®æ¬Šç›Š

### 4. Language é¡å‹

```111:111:types.ts
export type Language = 'zh-TW' | 'zh-CN' | 'en';
```

æ”¯æ´ä¸‰ç¨®èªè¨€ï¼š
- **`'zh-TW'`**ï¼šç¹é«”ä¸­æ–‡
- **`'zh-CN'`**ï¼šç°¡é«”ä¸­æ–‡
- **`'en'`**ï¼šè‹±æ–‡

### 5. Theme é¡å‹

```112:112:types.ts
export type Theme = 'light' | 'dark';
```

æ”¯æ´å…©ç¨®ä¸»é¡Œï¼š
- **`'light'`**ï¼šæ·ºè‰²æ¨¡å¼
- **`'dark'`**ï¼šæ·±è‰²æ¨¡å¼

## ğŸ’¡ ä½¿ç”¨ç¯„ä¾‹

### åœ¨çµ„ä»¶ä¸­ä½¿ç”¨ InputState

```typescript
import { InputState } from './types';

const [inputs, setInputs] = useState<InputState>({
  dihao: '',
  area: 0,
  // ... å…¶ä»–æ¬„ä½
});
```

### åœ¨è¨ˆç®—å‡½æ•¸ä¸­ä½¿ç”¨é¡å‹

```typescript
import { InputState, CalculationResult } from './types';

export const calculateResults = (inputs: InputState): CalculationResult => {
  // è¨ˆç®—é‚è¼¯...
  return {
    areas: { /* ... */ },
    sales: { /* ... */ },
    // ...
  };
};
```

## ğŸ”— ç›¸é—œæª”æ¡ˆ

- [ä¸»æ‡‰ç”¨ç¨‹å¼](./04-ä¸»æ‡‰ç”¨ç¨‹å¼.md) - ä½¿ç”¨ `InputState` ç®¡ç†ç‹€æ…‹
- [è¨ˆç®—é‚è¼¯](./06-è¨ˆç®—é‚è¼¯.md) - ä½¿ç”¨ `InputState` å’Œ `CalculationResult`
- [çµæœå„€è¡¨æ¿](./09-çµæœå„€è¡¨æ¿.md) - ä½¿ç”¨ `CalculationResult` é¡¯ç¤ºçµæœ

