# 專案結構

本文檔詳細說明專案的目錄結構和各檔案的職責。

## 📂 目錄樹

```
prorebuild/
├── components/              # React 組件目錄
│   ├── InputField.tsx       # 表單輸入欄位組件
│   └── ResultsDashboard.tsx # 結果展示儀表板組件
│
├── utils/                   # 工具函數目錄
│   ├── calculations.ts      # 核心計算邏輯
│   └── i18n.ts              # 國際化翻譯字典
│
├── dist/                    # 建置輸出目錄（自動生成，不應手動編輯）
│   ├── assets/              # 打包後的靜態資源
│   ├── index.html           # 建置後的 HTML
│   └── _redirects           # Cloudflare Pages 重定向規則
│
├── public/                  # 靜態資源目錄
│   └── _redirects           # 部署時的重定向規則
│
├── node_modules/            # 依賴套件（npm install 後生成）
│
├── App.tsx                  # 主應用程式組件
├── index.tsx                # 應用程式入口點
├── types.ts                 # TypeScript 類型定義
├── index.html               # HTML 模板
├── index.css                # 全域樣式（目前為空）
├── vite.config.ts           # Vite 建置配置
├── package.json             # 專案配置與依賴管理
├── package-lock.json        # 依賴版本鎖定檔
├── tsconfig.json            # TypeScript 編譯配置
├── wrangler.toml            # Cloudflare Workers/Pages 配置
├── worker.js                # Cloudflare Worker 腳本（如需要）
├── metadata.json            # 專案元數據
├── README.md                # 專案說明文檔
└── AGENTS.md                # AI 助手規則文檔
```

## 📄 檔案說明

### 根目錄檔案

#### `index.tsx`
- **職責**：應用程式入口點
- **功能**：初始化 React 應用，掛載到 DOM
- **相關文檔**：[入口檔案](./03-入口檔案.md)

#### `App.tsx`
- **職責**：主應用程式組件
- **功能**：
  - 管理全域狀態（輸入資料、語言、主題）
  - 處理表單輸入與驗證
  - 渲染分頁式輸入介面
  - 整合結果展示組件
- **相關文檔**：[主應用程式](./04-主應用程式.md)

#### `types.ts`
- **職責**：TypeScript 類型定義
- **功能**：
  - 定義 `InputState` 介面（所有輸入欄位）
  - 定義 `CalculationResult` 介面（計算結果結構）
  - 定義 `TabCategory` 枚舉（分頁類別）
  - 定義 `Language` 和 `Theme` 類型
- **相關文檔**：[類型定義](./05-類型定義.md)

#### `index.html`
- **職責**：HTML 模板
- **功能**：
  - 引入 Tailwind CSS（CDN）
  - 配置自訂動畫與樣式
  - 設定 import map（用於 CDN 載入 React）
  - 提供 React 掛載點（`#root`）
- **相關文檔**：[配置檔案](./10-配置檔案.md)

#### `index.css`
- **職責**：全域 CSS 樣式
- **狀態**：目前為空，樣式主要透過 Tailwind CSS 管理

### components/ 目錄

#### `components/InputField.tsx`
- **職責**：可重用的表單輸入欄位組件
- **功能**：
  - 支援文字與數字輸入
  - 可選的後綴標籤（如「坪」、「%」）
  - 深色模式支援
  - 統一的樣式與互動效果
- **相關文檔**：[輸入組件](./08-輸入組件.md)

#### `components/ResultsDashboard.tsx`
- **職責**：結果展示儀表板
- **功能**：
  - 顯示計算結果的各種卡片
  - 成本分佈圓餅圖
  - 費用明細彈窗
  - 關鍵指標突出顯示
- **相關文檔**：[結果儀表板](./09-結果儀表板.md)

### utils/ 目錄

#### `utils/calculations.ts`
- **職責**：核心計算引擎
- **功能**：
  - 接收 `InputState`，計算所有結果
  - 面積計算（容積、免計容積、地下室等）
  - 成本計算（重建、設計、利息、管理費等）
  - 收益計算（車位、樓層銷售）
  - 權益分配計算（變現、分回、一坪換幾坪）
- **相關文檔**：[計算邏輯](./06-計算邏輯.md)

#### `utils/i18n.ts`
- **職責**：國際化翻譯系統
- **功能**：
  - 提供三種語言字典（繁體中文、簡體中文、英文）
  - 統一的翻譯函數 `t(lang, key)`
  - 支援所有 UI 文字的多語言顯示
- **相關文檔**：[國際化](./07-國際化.md)

### 配置檔案

#### `package.json`
- **職責**：專案配置與依賴管理
- **內容**：
  - 專案名稱、版本
  - 依賴套件列表
  - npm 腳本（dev, build, preview, deploy）
- **相關文檔**：[配置檔案](./10-配置檔案.md)

#### `vite.config.ts`
- **職責**：Vite 建置工具配置
- **功能**：
  - React 插件設定
  - 開發伺服器配置（port: 3000）
  - 環境變數處理（GEMINI_API_KEY）
  - 路徑別名設定（`@` → 專案根目錄）
- **相關文檔**：[配置檔案](./10-配置檔案.md)

#### `tsconfig.json`
- **職責**：TypeScript 編譯配置
- **功能**：定義編譯選項、路徑解析規則

#### `wrangler.toml`
- **職責**：Cloudflare Pages/Workers 部署配置
- **注意**：本文檔不包含 Cloudflare 部署相關內容

## 🔗 檔案依賴關係

```
index.tsx
  └── App.tsx
       ├── types.ts
       ├── utils/calculations.ts
       ├── utils/i18n.ts
       ├── components/InputField.tsx
       └── components/ResultsDashboard.tsx
```

## 📝 命名規範

- **組件檔案**：PascalCase（如 `InputField.tsx`）
- **工具檔案**：camelCase（如 `calculations.ts`）
- **類型檔案**：camelCase（如 `types.ts`）
- **配置檔案**：kebab-case 或特定格式（如 `vite.config.ts`）

## 🚫 不應手動編輯的檔案

- `dist/` 目錄下的所有檔案（由 `npm run build` 自動生成）
- `node_modules/` 目錄（由 `npm install` 自動生成）
- `package-lock.json`（由 npm 自動管理）

## 🔗 相關文檔

- [專案概述](./01-專案概述.md)
- [入口檔案](./03-入口檔案.md)
- [主應用程式](./04-主應用程式.md)

