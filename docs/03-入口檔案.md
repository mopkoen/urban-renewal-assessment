# å…¥å£æª”æ¡ˆ - index.tsx

## ğŸ“ æª”æ¡ˆä½ç½®

```
index.tsx
```

## ğŸ¯ åŠŸèƒ½èªªæ˜

`index.tsx` æ˜¯æ•´å€‹æ‡‰ç”¨ç¨‹å¼çš„å…¥å£é»ï¼Œè² è²¬åˆå§‹åŒ– React æ‡‰ç”¨ä¸¦å°‡å…¶æ›è¼‰åˆ° DOM ä¸Šã€‚

## ğŸ“ ç¨‹å¼ç¢¼çµæ§‹

### å®Œæ•´ç¨‹å¼ç¢¼

```1:15:index.tsx
import React from 'react';
import ReactDOM from 'react-dom/client';
import App from './App';

const rootElement = document.getElementById('root');
if (!rootElement) {
  throw new Error("Could not find root element to mount to");
}

const root = ReactDOM.createRoot(rootElement);
root.render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);
```

## ğŸ” è©³ç´°èªªæ˜

### 1. å¼•å…¥ä¾è³´

```typescript
import React from 'react';
import ReactDOM from 'react-dom/client';
import App from './App';
```

- **React**ï¼šå¼•å…¥ React æ ¸å¿ƒåº«
- **ReactDOM**ï¼šå¼•å…¥ React DOM æ¸²æŸ“åº«ï¼ˆä½¿ç”¨ `createRoot` APIï¼ŒReact 18+ çš„æ–°æ–¹å¼ï¼‰
- **App**ï¼šå¼•å…¥ä¸»æ‡‰ç”¨ç¨‹å¼çµ„ä»¶

### 2. å–å¾— DOM å…ƒç´ 

```typescript
const rootElement = document.getElementById('root');
if (!rootElement) {
  throw new Error("Could not find root element to mount to");
}
```

- å¾ HTML ä¸­å–å¾— id ç‚º `root` çš„å…ƒç´ 
- å¦‚æœæ‰¾ä¸åˆ°å…ƒç´ ï¼Œæ‹‹å‡ºéŒ¯èª¤ï¼ˆé˜²æ­¢æ‡‰ç”¨ç¨‹å¼åœ¨éŒ¯èª¤ç‹€æ…‹ä¸‹é‹è¡Œï¼‰

### 3. å»ºç«‹ Root ä¸¦æ¸²æŸ“

```typescript
const root = ReactDOM.createRoot(rootElement);
root.render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);
```

- **`createRoot`**ï¼šå»ºç«‹ React 18+ çš„æ ¹ç¯€é»ï¼ˆå–ä»£èˆŠç‰ˆçš„ `ReactDOM.render`ï¼‰
- **`React.StrictMode`**ï¼šå•Ÿç”¨åš´æ ¼æ¨¡å¼ï¼Œå¹«åŠ©é–‹ç™¼æ™‚ç™¼ç¾æ½›åœ¨å•é¡Œ
- **`<App />`**ï¼šæ¸²æŸ“ä¸»æ‡‰ç”¨ç¨‹å¼çµ„ä»¶

## ğŸ”— ç›¸é—œæª”æ¡ˆ

### HTML æ¨¡æ¿

åœ¨ `index.html` ä¸­å®šç¾©äº†æ›è¼‰é»ï¼š

```94:96:index.html
  <body class="antialiased text-slate-900 dark:text-slate-100">
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
  </body>
```

- `<div id="root">` æ˜¯ React æ‡‰ç”¨ç¨‹å¼çš„æ›è¼‰é»
- `<script type="module" src="/index.tsx">` è¼‰å…¥æ­¤å…¥å£æª”æ¡ˆ

### ä¸»æ‡‰ç”¨ç¨‹å¼çµ„ä»¶

å…¥å£æª”æ¡ˆæœƒæ¸²æŸ“ `App.tsx` çµ„ä»¶ï¼Œé€™æ˜¯æ•´å€‹æ‡‰ç”¨ç¨‹å¼çš„æ ¸å¿ƒï¼š

- [ä¸»æ‡‰ç”¨ç¨‹å¼](./04-ä¸»æ‡‰ç”¨ç¨‹å¼.md)

## ğŸ’¡ æŠ€è¡“è¦é»

### React 18+ createRoot API

ä½¿ç”¨æ–°çš„ `createRoot` API å–ä»£èˆŠç‰ˆ `ReactDOM.render`ï¼š

**èˆŠç‰ˆï¼ˆReact 17 åŠä¹‹å‰ï¼‰**ï¼š
```typescript
ReactDOM.render(<App />, rootElement);
```

**æ–°ç‰ˆï¼ˆReact 18+ï¼‰**ï¼š
```typescript
const root = ReactDOM.createRoot(rootElement);
root.render(<App />);
```

æ–° API çš„å„ªé»ï¼š
- æ”¯æ´ä¸¦ç™¼æ¸²æŸ“ï¼ˆConcurrent Renderingï¼‰
- æ›´å¥½çš„æ•ˆèƒ½
- æ”¯æ´è‡ªå‹•æ‰¹è™•ç†ï¼ˆAutomatic Batchingï¼‰

### StrictMode çš„ä½œç”¨

`React.StrictMode` åœ¨é–‹ç™¼æ¨¡å¼ä¸‹æœƒï¼š
- æª¢æŸ¥éæ™‚çš„ API ä½¿ç”¨
- æª¢æ¸¬æ„å¤–çš„å‰¯ä½œç”¨
- è­¦å‘Šä¸å®‰å…¨çš„ç”Ÿå‘½é€±æœŸæ–¹æ³•
- æª¢æ¸¬éæ™‚çš„ Context API

**æ³¨æ„**ï¼šStrictMode åªåœ¨é–‹ç™¼æ¨¡å¼ä¸‹ç”Ÿæ•ˆï¼Œä¸æœƒå½±éŸ¿ç”Ÿç”¢ç’°å¢ƒã€‚

## ğŸš€ åŸ·è¡Œæµç¨‹

1. ç€è¦½å™¨è¼‰å…¥ `index.html`
2. HTML ä¸­çš„ `<script>` æ¨™ç±¤è¼‰å…¥ `index.tsx`
3. Vite ç·¨è­¯ TypeScript/React ç¨‹å¼ç¢¼
4. `index.tsx` åŸ·è¡Œï¼Œå–å¾— `#root` å…ƒç´ 
5. å»ºç«‹ React Root ä¸¦æ¸²æŸ“ `<App />` çµ„ä»¶
6. æ‡‰ç”¨ç¨‹å¼é–‹å§‹é‹è¡Œ

## ğŸ”— ç›¸é—œæ–‡æª”

- [ä¸»æ‡‰ç”¨ç¨‹å¼](./04-ä¸»æ‡‰ç”¨ç¨‹å¼.md)
- [é…ç½®æª”æ¡ˆ](./10-é…ç½®æª”æ¡ˆ.md) - HTML æ¨¡æ¿èªªæ˜

